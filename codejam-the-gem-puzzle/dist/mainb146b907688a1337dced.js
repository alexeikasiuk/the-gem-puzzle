(()=>{"use strict";var t=[t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],r=0;r<t.length;r++){var d=t[r],l=i.base?d[0]+i.base:d[0],h=o[l]||0,m="".concat(l," ").concat(h);o[l]=h+1;var u=n(m),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var c=s(p,i);i.byIndex=r,e.splice(r,0,{identifier:m,updater:c,references:1})}a.push(m)}return a}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var o=i(t=t||[],s=s||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var r=n(o[a]);e[r].references--}for(var d=i(t,s),l=0;l<o.length;l++){var h=n(o[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=d}}},t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},(t,e,n)=>{n.d(e,{Z:()=>x});var i=n(7),s=n.n(i),o=n(8),a=n.n(o),r=n(9),d=n.n(r),l=new URL(n(11),n.b),h=new URL(n(12),n.b),m=new URL(n(13),n.b),u=new URL(n(14),n.b),p=a()(s()),c=d()(l),g=d()(h),v=d()(m),b=d()(u);p.push([t.id,"@font-face {\n  font-family: 'Roboto';\n  src: url("+c+");\n  font-weight: 400;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Roboto';\n  src: url("+g+");\n  font-weight: 600;\n  font-style: normal;\n}\n* {\n  box-sizing: border-box;\n}\nbody {\n  font-family: Roboto, sans-serif;\n  padding: 10px;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  min-height: 100vh;\n  text-align: center;\n  background-color: lightgray;\n}\n.container {\n  position: relative;\n  margin: 0 auto;\n  border-radius: 20px;\n  box-shadow: 0 0 35px black;\n  padding: 0 5px 40px;\n  overflow: hidden;\n  width: 900px;\n}\nbutton {\n  cursor: pointer;\n  border: none;\n  background-color: lightgray;\n  box-shadow: 0 0 10px #000;\n  transition: all 0.3s;\n}\nbutton:hover {\n  box-shadow: 0 0 15px #000;\n}\nbutton:active {\n  box-shadow: 0 0 10px #000;\n}\nbutton.disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\nbutton.disabled:hover {\n  box-shadow: 0 0 10px #000;\n}\n.game-window {\n  border-radius: 10px;\n  background-color: rgba(0, 0, 0, 0.1);\n  box-shadow: 0 0 10px black;\n  overflow: hidden;\n  max-width: 800px;\n  margin: 0 auto;\n}\n.controls {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n.control-btn {\n  cursor: pointer;\n  padding: 10px;\n  min-width: 15%;\n  border: none;\n  border-radius: 0px;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  box-shadow: 0 0 5px black;\n  background-color: lightgray;\n  transition: all 0.3s;\n}\n.control-btn:hover {\n  box-shadow: 0 0 20px black;\n}\n.control-btn.disabled,\n.control-btn.disabled:hover {\n  cursor: default;\n  opacity: 0.3;\n  box-shadow: 0 0 5px black;\n  cursor: not-allowed;\n}\n.control-btn:active {\n  box-shadow: 0 0 5px black;\n}\n#start-game {\n  border-bottom-left-radius: 0px;\n}\n#get-result {\n  border-bottom-right-radius: 0;\n}\n.sound {\n  position: absolute;\n  right: 15px;\n  top: 15px;\n  border: none;\n  background: transparent;\n  font-size: 3rem;\n  text-shadow: 0 0 5px #fff;\n  box-shadow: 0 0 10px black;\n  border: 3px solid darkgray;\n  width: 50px;\n  height: 50px;\n  line-height: 50px;\n  border-radius: 25px;\n  padding: 0;\n  transition: all 0.5s;\n  cursor: pointer;\n  background: url("+v+") 50% no-repeat lightgray;\n  background-size: cover;\n}\n.sound:hover,\n.sound.disabled:hover {\n  box-shadow: 0 0 20px black;\n  background-color: darkgray;\n}\n.sound.disabled {\n  background: url("+b+") 50% no-repeat lightgray;\n  background-size: cover;\n  cursor: pointer;\n}\n.info {\n  display: flex;\n  justify-content: space-between;\n  box-shadow: inset 0 0 5px #000;\n  background-color: lightgray;\n  padding: 10px 20px;\n}\n.field-window {\n  position: relative;\n}\n.field {\n  margin: 20px auto;\n  box-shadow: 0 0 15px #000;\n  width: 700px;\n  height: 700px;\n  border-radius: 5px;\n  display: grid;\n  grid-gap: 0;\n  justify-items: center;\n  align-items: center;\n}\n.field.disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.field.disabled .cell:hover {\n  box-shadow: 0 0 10px #000;\n  cursor: not-allowed;\n}\n.grid-3 {\n  grid-template-columns: repeat(3, 33.33333%);\n  grid-template-rows: repeat(3, 33.33333%);\n  font-size: 4rem;\n}\n.grid-4 {\n  grid-template-columns: repeat(4, 25%);\n  grid-template-rows: repeat(4, 25%);\n  font-size: 3.5rem;\n}\n.grid-5 {\n  grid-template-columns: repeat(5, 20%);\n  grid-template-rows: repeat(5, 20%);\n  font-size: 3rem;\n}\n.grid-6 {\n  grid-template-columns: repeat(6, 16.6666%);\n  grid-template-rows: repeat(6, 16.6666%);\n  font-size: 2.5rem;\n}\n.grid-7 {\n  grid-template-columns: repeat(7, 14.2857%);\n  grid-template-rows: repeat(7, 14.2857%);\n  font-size: 2rem;\n}\n.grid-8 {\n  grid-template-columns: repeat(8, 12.5%);\n  grid-template-rows: repeat(8, 12.5%);\n  font-size: 1.5rem;\n}\n.saved-game h2 {\n  margin-bottom: 100px;\n  font-size: 2rem;\n}\n.saved-game button {\n  margin: 20px;\n  padding: 10px 20px;\n}\n.levels {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 30px;\n}\n.levels button {\n  min-width: 13%;\n  padding: 10px 20px;\n  border-radius: 10px;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  border: none;\n  background-color: lightgray;\n  box-shadow: 0 0 3px #000;\n  transition: all 0.2s;\n}\n.levels button:first-child {\n  border-top-left-radius: 0;\n}\n.levels button:last-child {\n  border-top-right-radius: 0;\n}\n.levels button:hover {\n  cursor: pointer;\n  box-shadow: 0 0 15px black;\n}\n.levels button.disabled,\n.levels button.disabled:hover {\n  opacity: 0.2;\n  cursor: default;\n  box-shadow: 0 0 3px black;\n  cursor: not-allowed;\n}\n.levels button:active {\n  cursor: default;\n  box-shadow: 0 0 3px black;\n}\nh1 {\n  position: relative;\n  padding: 10px 20px 5px;\n  border-bottom: 2px solid darkgray;\n  border-bottom-left-radius: 40px;\n  border-bottom-right-radius: 40px;\n  margin: 0;\n  font-size: 3rem;\n  display: inline-block;\n  margin-bottom: 20px;\n  text-shadow: 0 0 5px #fff;\n}\nh1::before,\nh1::after {\n  content: '';\n  height: 100%;\n  width: 50px;\n  position: absolute;\n  border-top: 2px solid darkgray;\n  top: -5px;\n}\nh1::before {\n  left: -50px;\n  border-top-right-radius: 100px;\n}\nh1::after {\n  right: -50px;\n  border-top-left-radius: 100px;\n}\nbutton {\n  font-size: 1.2rem;\n  border-radius: 5px;\n}\n.cell {\n  box-shadow: 0 0 10px #000;\n  width: 95%;\n  height: 95%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  cursor: pointer;\n  position: relative;\n  background-color: darkgray;\n}\n.slow {\n  transition: all 0.1s;\n}\n.zero-cell {\n  visibility: hidden;\n}\n.cell:hover {\n  box-shadow: 0 0 25px #000;\n}\n.modal {\n  background-color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  visibility: hidden;\n  transition: all 0.3s;\n}\n.show {\n  opacity: 1;\n  visibility: visible;\n}\n.modal-body {\n  width: 700px;\n  background-color: lightgray;\n  height: 80%;\n  margin: 110px auto 0;\n  border-radius: 15px;\n  padding-bottom: 20px;\n  overflow-y: scroll;\n}\n.modal-close-btn {\n  position: absolute;\n  right: 15px;\n  top: 15px;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  font-size: 2rem;\n  line-height: 30px;\n  box-shadow: 0 0 5px #fff;\n}\n.modal-close-btn:hover {\n  box-shadow: 0 0 10px #fff;\n}\n.modal-close-btn:active {\n  box-shadow: 0 0 1px #fff;\n}\n.clear-results {\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  padding: 5px 10px;\n  box-shadow: 0 0 5px #fff;\n}\n.clear-results:hover {\n  box-shadow: 0 0 10px #fff;\n}\ntable,\nth,\ntr,\ntd {\n  border: 1px solid #000;\n}\nth {\n  font-weight: 600;\n}\n.table-results {\n  width: 80%;\n  margin: 0 auto;\n  border-collapse: collapse;\n}\n.table-results h3 {\n  padding: 0;\n  margin: 0;\n  text-align: left;\n}\n.win-modal {\n  position: absolute;\n  width: 88%;\n  height: 100%;\n  font-size: 1.5rem;\n}\n.win-modal h3 {\n  font-size: 2.5rem;\n  margin: 100px auto 150px;\n}\n.save-modal {\n  position: absolute;\n  width: 88%;\n  height: 100%;\n}\n.save-modal h3 {\n  font-size: 2.5rem;\n  margin: 100px auto 100px;\n}\n.save-modal button {\n  padding: 10px 20px;\n  margin: 20px;\n}\n\n@media (max-width: 850px) {\n  .container {\n    width: 100%;\n    padding-left: 10px;\n    padding-right: 10px;\n  }\n  .game-window {\n    width: 500px;\n  }\n  .field {\n    width: 400px;\n    height: 400px;\n  }\n  .grid-3 {\n    font-size: 3.2rem;\n  }\n  .grid-4 {\n    font-size: 2.5rem;\n  }\n  .grid-5 {\n    font-size: 2rem;\n  }\n  .grid-6 {\n    font-size: 1.5rem;\n  }\n  .grid-7 {\n    font-size: 1.2rem;\n  }\n  .grid-8 {\n    font-size: 1.1rem;\n  }\n  h1 {\n    font-size: 2.5rem;\n  }\n  .control-btn,\n  .levels button {\n    font-size: 1rem;\n    padding: 5px 10px;\n  }\n  .sound {\n    width: 40px;\n    height: 40px;\n  }\n  .win-modal {\n    width: 80%;\n    padding: 0 20px;\n  }\n  .win-modal h3 {\n    margin: 50px auto 100px;\n  }\n  .win-modal p {\n    font-size: 1.3rem;\n  }\n  .win-modal p:last-child {\n    color: gray;\n    font-size: 1rem;\n    margin-top: 50px;\n  }\n  .save-modal {\n    width: 380px;\n  }\n  .save-modal h3 {\n    font-size: 1.7rem;\n    margin: 50px auto 80px;\n  }\n  .save-modal button {\n    padding: 5px 15px;\n    font-size: 1rem;\n  }\n  .saved-game h2 {\n    margin-bottom: 70px;\n    font-size: 1.7rem;\n    padding: 0 20px;\n  }\n  .saved-game button {\n    padding: 5px 15px;\n    font-size: 1rem;\n  }\n  .modal-body {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n  }\n  .table-results {\n    width: 95%;\n  }\n  tr td {\n    font-size: 0.9rem;\n  }\n  .clear-results,\n  .modal-close-btn {\n    box-shadow: 0 0 5px #000;\n  }\n  .clear-results:hover,\n  .modal-close-btn:hover {\n    box-shadow: 0 0 10px #000;\n  }\n  .modal-close-btn:active,\n  .clear-results:active {\n    box-shadow: 0 0 5px #000;\n  }\n}\n\n@media (max-width: 550px) {\n  body {\n    padding: 5px;\n  }\n  .container {\n    width: 100%;\n    padding: 0 5px 5px;\n    border-bottom-left-radius: 15px;\n    border-bottom-right-radius: 15px;\n  }\n  .game-window {\n    width: 100%;\n  }\n  .field {\n    width: 280px;\n    height: 280px;\n  }\n  h1 {\n    font-size: 1.5rem;\n    border-radius: 20px;\n  }\n  h1::before {\n    border-top-right-radius: 40px;\n  }\n  h1::after {\n    border-top-left-radius: 40px;\n  }\n  .control-btn {\n    font-size: 0.8rem;\n  }\n  .sound {\n    width: 30px;\n    height: 30px;\n    top: 5px;\n    right: 5px;\n    border: 1px solid darkgray;\n  }\n  .info {\n    font-size: 0.8rem;\n  }\n  .grid-3 {\n    font-size: 2rem;\n  }\n  .grid-4 {\n    font-size: 1.7rem;\n  }\n  .grid-5 {\n    font-size: 1.5rem;\n  }\n  .grid-6 {\n    font-size: 1.2rem;\n  }\n  .grid-7 {\n    font-size: 1rem;\n  }\n  .grid-8 {\n    font-size: 0.9rem;\n  }\n  .levels button {\n    font-size: 0.8rem;\n    min-width: 0;\n    padding: 5px 10px;\n  }\n  .win-modal {\n    width: 280px;\n    padding: 0 20px;\n  }\n\n  .win-modal h3 {\n    margin: 30px auto 70px;\n    font-size: 1.5rem;\n  }\n  .win-modal p {\n    font-size: 1rem;\n  }\n  .win-modal p:last-child {\n    font-size: 0.8rem;\n  }\n  .save-modal {\n    width: 280px;\n  }\n  .save-modal h3 {\n    font-size: 1rem;\n    margin: 40px auto 40px;\n  }\n  .save-modal button {\n    font-size: 0.8rem;\n    padding: 5px 10px;\n  }\n  .saved-game h2 {\n    margin-bottom: 40px;\n    font-size: 1rem;\n    padding: 0 20px;\n  }\n  .saved-game button {\n    padding: 5px 10px;\n    font-size: 0.8rem;\n  }\n  .clear-results {\n    padding: 5px;\n    font-size: 1rem;\n    left: 10px;\n    top: 15px;\n  }\n  .table-results h3 {\n    font-size: 1rem;\n  }\n  .modal-body h2 {\n    margin: 15px auto;\n  }\n}\n",""]);const x=p},t=>{t.exports=function(t){return t[1]}},t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(a[d]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);i&&a[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),e.push(h))}},e}},t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},,(t,e,n)=>{t.exports=n.p+"fc2b5060f7accec5cf74.ttf"},(t,e,n)=>{t.exports=n.p+"f80816a5455d171f948d.ttf"},t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PHBhdGggZD0iTTYgMTh2MTJoOGwxMCAxMFY4TDE0IDE4SDZ6bTI3IDZjMC0zLjUzLTIuMDQtNi41OC01LTguMDV2MTYuMTFjMi45Ni0xLjQ4IDUtNC41MyA1LTguMDZ6TTI4IDYuNDZ2NC4xM2M1Ljc4IDEuNzIgMTAgNy4wNyAxMCAxMy40MXMtNC4yMiAxMS42OS0xMCAxMy40MXY0LjEzYzguMDEtMS44MiAxNC04Ljk3IDE0LTE3LjU0UzM2LjAxIDguMjggMjggNi40NnoiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDQ4djQ4SDB6Ii8+PC9zdmc+"},t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj48cGF0aCBkPSJNNDA1LjUgMjU2YzAgMjIuNzE3LTQuODgzIDQ0LjM2Mi0xMy42MDMgNjMuODU1bDMxLjg4IDMxLjg4QzQzOS4yODMgMzIzLjMzIDQ0OCAyOTAuNjUzIDQ0OCAyNTZjMC05My4yNTYtNjQtMTcyLjI1NC0xNDktMTkydjQ0Ljk3OEMzNjEgMTI3LjYzMiA0MDUuNSAxODYuODgyIDQwNS41IDI1NnpNMjU2IDgwLjQ1OGwtNTEuMDIxIDUyLjQ4TDI1NiAxODMuOTU3ek00MjAuODQyIDM5Ni44ODUgOTEuMTE2IDY3LjE1N2wtMjQgMjQgOTAuNDk5IDkwLjQxMy04LjI4IDEwLjQzSDY0djEyOGg4NS4zMzRMMjU2IDQzMS41NDNWMjgwbDk0LjkxNSA5NC42ODZDMzM1Ljc5NSAzODcuNDQzIDMxOCAzOTcuMjEzIDI5OSA0MDMuMDIyVjQ0OGMzMS03LjE3MiA1OC45OTYtMjIuMTYzIDgyLjMxNS00Mi44MDlsMzkuNjEgMzkuNjkzIDI0LTI0LjA0My0yNC4wMDItMjQuMDM5LS4wODEuMDgzeiIvPjxwYXRoIGQ9Ik0zNTIuMTg4IDI1NmMwLTM4LjM5OS0yMS4xODgtNzIuNDA3LTUzLjE4OC04OC44NjN2NTkuODJsNTAuODAxIDUwLjgwMUExMDAuNTk2IDEwMC41OTYgMCAwIDAgMzUyLjE4OCAyNTZ6Ii8+PC9zdmc+"}],e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var t=n(0),e=n.n(t),i=n(1),s=n.n(i),o=n(2),a=n.n(o),r=n(3),d=n.n(r),l=n(4),h=n.n(l),m=n(5),u=n.n(m),p=n(6),c={};c.styleTagTransform=u(),c.setAttributes=d(),c.insert=a().bind(null,"head"),c.domAPI=s(),c.insertStyleElement=h(),e()(p.Z,c),p.Z&&p.Z.locals&&p.Z.locals;const g=n.p+"26cc815935261f3f655a.mp3";let v=new class{constructor(){this.level=4,this.movesCount=0,this.time={m:0,s:0},this.puzzleItems=[],this.hasSound=!0,this.isMove=!1,this.savedPuzzleItemsOrder=null,this.isWin=!1,this.isHelped=!1}init(){this.savedGame=JSON.parse(localStorage.getItem("game")),this.savedGame?this.createPage():this.loadGame()}loadGame(){this.createPage(),this.setButtonsBehavior(),this.startGame()}startGame(){this.fillField(),this.setPuzzleItemsBehavior(),this.setCurPageData(),this.timerId=setInterval((()=>{this.time.s++,this.showCurTime()}),1e3)}restartGame(){!this.isWin&&this.movesCount>0?(this.puzzle.innerHTML='\n        <div class="save-modal">\n          <h3>Do you want to save this game?</h3>\n          <div>\n          <button id="save-this-game">YES</button>\n          <button id="remove-game">NO</button>\n          </div>\n      </div>\n      ',document.getElementById("save-this-game").onclick=()=>{this.saveGame(),this.clearGameState(),this.loadGame()},document.getElementById("remove-game").onclick=()=>{localStorage.removeItem("game"),this.clearGameState(),this.loadGame()}):(this.clearGameState(),this.loadGame())}saveGame(){let t={moves:this.movesCount,time:this.time,level:this.level,puzzle:[]};this.puzzleItems.forEach((e=>t.puzzle.push(+e.innerHTML))),localStorage.setItem("game",JSON.stringify(t))}showResults(){let t=localStorage.getItem("results"),e=document.createElement("table");if(e.classList.add("table-results"),this.modalResults.classList.add("show"),t){e.insertAdjacentHTML("afterbegin","\n        <tr>\n          <th>№</th>\n          <th>Date</th>\n          <th>Help</th>\n          <th>Moves</th>\n          <th>Time</th>\n        </tr>\n      "),t=JSON.parse(t);for(let n in t){if(0==t[n].length)continue;let i=document.createElement("tr");i.insertAdjacentHTML("afterbegin",`\n          <td colspan="5"><h3>Game Level: ${n}x${n}</h3></td>\n        `),e.append(i),t[n].forEach(((t,n)=>{let i,s=document.createElement("tr"),o=new Date(t.date),a=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,r=o.getDate()<10?"0"+o.getDate():o.getDate(),d=o.getHours()<10?"0"+o.getHours():o.getHours(),l=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes();switch(o.getDay()){case 0:i="вс";break;case 1:i="пн";break;case 2:i="вт";break;case 3:i="ср";break;case 4:i="чт";break;case 5:i="пт";break;case 6:i="сб"}s.insertAdjacentHTML("afterbegin",`\n              <td>${n+1}</td>\n              <td>${r}.${a} ${i}, ${d}:${l}</td>\n              <td>${t.help?"yes":"no"}</td>\n              <td>${t.moves}</td>\n              <td>${t.time.m}:${t.time.s}</td>\n          `),e.append(s)}))}}else e.innerHTML="You have no saved game's results";let n=document.querySelector(".modal-results").querySelector(".modal-content");n.innerHTML="",n.append(e)}showCurTime(){60===this.time.s&&(this.time.s=0,this.time.m++),60===this.time.m&&alert("game over");let t=this.time.m<10?`0${this.time.m}`:this.time.m,e=this.time.s<10?`0${this.time.s}`:this.time.s;this.timeNode.innerHTML=`${t}:${e}`}setCurPageData(){this.movesCountNode.innerHTML=this.movesCount,this.levelNode.innerHTML=`${this.level}&times;${this.level}`,this.showCurTime(),this.levelButtons.forEach((t=>+t.getAttribute("data-size")===this.level?t.classList.add("disabled"):t.classList.remove("disabled")))}createPage(){document.body.innerHTML="",document.body.insertAdjacentHTML("afterbegin",'\n    <div class="container">\n      <h1>RSS Gem Puzzle</h1>\n      <div class="game-window">\n        <div class="controls">\n          <button class="control-btn" id="start-game">Restart</button>\n          <button class="control-btn" id="help">Let\'s win!</button>\n          <button class="control-btn" id="save-game">Save</button>\n          <button class="control-btn" id="get-result">Result</button>\n          <button class="sound" id="sound"></button>       \n        </div>\n        <div class="info">\n          <div class=""moves>\n            <span>Moves:</span>\n            <span id="moves-count">-</span>\n          </div>\n          <div class="field-size">\n            <span>Level:</span>\n            <span id="cells-size">-&times;-</span>\n          </div>\n          <div class="duration">\n            <span>Time:</span>\n            <span id="time">--:--</span>\n          </div>\n        </div>\n        <div class="field-window">\n          <div class="field">\n            <div class="saved-game">\n              <h2>Do you want to continue the last saved game?</h2>\n              <div>\n                <button id="play-last-game">YES</button>\n                <button id="remove-saved-game">NO</button>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="levels">\n          <button data-size="3">3&times;3</button>\n          <button data-size="4">4&times;4</button>\n          <button data-size="5">5&times;5</button>\n          <button data-size="6">6&times;6</button>\n          <button data-size="7">7&times;7</button>\n          <button data-size="8">8&times;8</button>\n        </div>\n        <div class="modal modal-results">\n          <div class="modal-body">\n          <button class="modal-close-btn"id="modal-results-close">&times;</button>\n            <h2 class="modal-title">Top-10 results</h2>\n            <button class="clear-results" id="clear-results">Clear</button>\n            <div class="modal-content"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '),this.levelButtons=document.querySelector(".levels").querySelectorAll("button"),this.restartButton=document.getElementById("start-game"),this.saveButton=document.getElementById("save-game"),this.showResultButton=document.getElementById("get-result"),this.soundButton=document.getElementById("sound"),this.helpButton=document.getElementById("help"),this.clearResults=document.getElementById("clear-results"),this.movesCountNode=document.getElementById("moves-count"),this.levelNode=document.getElementById("cells-size"),this.timeNode=document.getElementById("time"),document.getElementById("play-last-game").onclick=t=>{this.setSavedGameData(),this.loadGame(),localStorage.removeItem("game")},document.getElementById("remove-saved-game").onclick=t=>{localStorage.removeItem("game"),this.loadGame()},this.modalResults=document.querySelector(".modal-results"),this.modalResultsBtnClose=document.getElementById("modal-results-close"),this.modalResultsBtnClose.onclick=()=>this.modalResults.classList.remove("show")}setButtonsBehavior(){this.levelButtons.forEach((t=>{t.onclick=()=>{t.classList.contains("disabled")||(!this.isWin&&this.movesCount>0?(this.puzzle.innerHTML='\n        <div class="save-modal">\n          <h3>Do you want to save this game?</h3>\n          <div>\n          <button id="save-this-game">YES</button>\n          <button id="remove-game">NO</button>\n          </div>\n      </div>\n      ',document.getElementById("save-this-game").onclick=()=>{this.saveGame(),this.clearGameState(),this.level=+t.getAttribute("data-size"),this.loadGame()},document.getElementById("remove-game").onclick=()=>{localStorage.removeItem("game"),this.clearGameState(),this.level=+t.getAttribute("data-size"),this.loadGame()}):(this.clearGameState(),this.level=+t.getAttribute("data-size"),this.loadGame()))}})),this.restartButton.onclick=()=>{this.restartButton.classList.contains("disabled")||this.restartGame()},this.helpButton.onclick=()=>{this.helpButton.classList.contains("disabled")||this.helpMe()},this.saveButton.onclick=()=>this.saveGame(),this.showResultButton.onclick=()=>this.showResults(),this.soundButton.onclick=()=>{this.hasSound=!this.hasSound,this.soundButton.classList.toggle("disabled")},this.clearResults.onclick=()=>{localStorage.removeItem("results"),this.showResults()}}fillField(){if(this.puzzle=document.querySelector(".field"),this.puzzleCoord={left:Math.round(this.puzzle.getBoundingClientRect().x),top:Math.round(this.puzzle.getBoundingClientRect().y),width:this.puzzle.offsetWidth,height:this.puzzle.offsetHeight},this.puzzle.classList.add(`grid-${this.level}`),this.puzzleItems=[],this.savedPuzzleItemsOrder)for(let t=0;t<this.level*this.level;t++){let e=document.createElement("div");e.innerHTML=this.savedPuzzleItemsOrder[t],0===this.savedPuzzleItemsOrder[t]&&e.classList.add("zero-cell"),e.classList.add("cell"),this.puzzleItems.push(e)}else{for(let t=0;t<this.level*this.level;t++){let e=document.createElement("div");e.innerHTML=t,0===t&&e.classList.add("zero-cell"),e.classList.add("cell"),this.puzzleItems.push(e)}this.puzzleItems=this.shuffle(this.puzzleItems)}this.savedPuzzleItemsOrder=null,this.puzzle.innerHTML="",this.puzzleItems.forEach((t=>this.puzzle.append(t)))}setPuzzleItemsBehavior(){this.puzzleItems.forEach((t=>{t.addEventListener("mousedown",(e=>{e.preventDefault();let n=this;if(this.isMove||this.isStopped||this.draggedItem)return;let i=document.querySelector(".zero-cell"),s={x:Math.round(t.getBoundingClientRect().x),y:Math.round(t.getBoundingClientRect().y),minLeft:n.puzzleCoord.left-Math.round(t.getBoundingClientRect().x),maxLeft:n.puzzleCoord.left+n.puzzleCoord.width-t.offsetWidth-Math.round(t.getBoundingClientRect().x),minTop:n.puzzleCoord.top-Math.round(t.getBoundingClientRect().y),maxTop:n.puzzleCoord.top+n.puzzleCoord.height-t.offsetHeight-Math.round(t.getBoundingClientRect().y),maxX:0,maxY:0},o=Math.round(i.getBoundingClientRect().x),a=Math.round(i.getBoundingClientRect().y),r=s.x-o,d=s.y-a,l=1.5*t.offsetWidth;if(!(0==d&&Math.abs(r)<=l||0==r&&Math.abs(d)<=l))return;this.isMove=!0,this.draggedItem=t,this.draggedItem.data=s,this.draggedItem.time=Date.now(),this.draggedItem.position={left:0,top:0},this.draggedItem.style.position="relative",this.draggedItem.style.zIndex="1000";let h=this.mouseCurCoord;this.draggedTimer=setInterval((()=>{this.draggedItem.position.left+=this.mouseCurCoord.x-h.x,this.draggedItem.position.top+=this.mouseCurCoord.y-h.y,this.draggedItem.position.left<s.minLeft?this.draggedItem.position.left=s.minLeft:this.draggedItem.position.left>s.maxLeft&&(this.draggedItem.position.left=s.maxLeft),this.draggedItem.position.top<s.minTop?this.draggedItem.position.top=s.minTop:this.draggedItem.position.top>s.maxTop&&(this.draggedItem.position.top=s.maxTop),s.maxX=Math.max(s.maxX,Math.abs(this.draggedItem.position.left)),s.maxY=Math.max(s.maxY,Math.abs(this.draggedItem.position.left)),this.draggedItem.style.left=this.draggedItem.position.left+"px",this.draggedItem.style.top=this.draggedItem.position.top+"px",h=this.mouseCurCoord}),10)}))})),document.onmouseup=t=>{if(!this.draggedItem||!this.isMove)return;clearInterval(this.draggedTimer);let e=Date.now()-this.draggedItem.time,n=Math.max(this.draggedItem.data.maxX,this.draggedItem.data.maxY),i=document.querySelector(".zero-cell"),s=Math.round(this.draggedItem.getBoundingClientRect().x),o=Math.round(this.draggedItem.getBoundingClientRect().y),a=Math.round(i.getBoundingClientRect().x),r=Math.round(i.getBoundingClientRect().y),d=s-a,l=o-r,h=this.draggedItem.offsetWidth;this.draggedItem.classList.add("slow"),Math.abs(d)<=h&&Math.abs(l)<=h||e<300&&n<20?(this.draggedItem.style.left=parseInt(this.draggedItem.style.left)+a-s+"px",this.draggedItem.style.top=parseInt(this.draggedItem.style.top)+r-o+"px",this.playSound(g),setTimeout((()=>{i.innerHTML=this.draggedItem.innerHTML,this.draggedItem.innerHTML=0,this.draggedItem.classList.add("zero-cell"),i.classList.remove("zero-cell"),this.draggedItem.style.zIndex="0",this.draggedItem.style.top="0",this.draggedItem.style.left="0",this.draggedItem.style.position="static",this.draggedItem.classList.remove("slow"),this.draggedItem=null,this.isMove=!1,this.movesCount++,this.movesCountNode.innerHTML=this.movesCount,this.checkGameState()}),100)):(this.draggedItem.style.top="0",this.draggedItem.style.left="0",this.timerMoveBack=setTimeout((()=>{this.draggedItem.classList.remove("slow"),this.draggedItem.style.zIndex="0",this.draggedItem.style.position="static",this.draggedItem=null,this.isMove=!1,this.playSound(g),clearTimeout(this.timerMoveBack)}),100))},document.onmousemove=t=>{this.mouseCurCoord={x:t.clientX,y:t.clientY}}}shuffle(t){let e=[].concat(t);for(let n=t.length-1;n>0;n--){let t=Math.floor(Math.random()*(n+1));[e[n],e[t]]=[e[t],e[n]]}return e}playSound(t){this.hasSound&&new Audio(t).play()}clearGameState(){this.time={m:0,s:0},this.movesCount=0,this.isHelped=!1,this.puzzleItems=[],this.isWin=!1,this.puzzle.innerHTML="",this.timerId&&clearInterval(this.timerId)}setSavedGameData(){this.level=this.savedGame.level,this.movesCount=this.savedGame.moves,this.time=this.savedGame.time,this.savedPuzzleItemsOrder=this.savedGame.puzzle}checkGameState(){let t=this.puzzleItems.map((t=>+t.innerHTML));t=[].concat(t.slice(t.length-1),t.slice(0,t.length-1));let e=[].concat(t).sort(((t,e)=>t-e));t.join("")==e.join("")&&(this.isWin=!0,this.saveWinGame(),clearInterval(this.timerId),this.saveButton.classList.add("disabled"),this.helpButton.classList.add("disabled"),this.showWinMessage())}helpMe(){this.isHelped=!0,this.puzzleItems=this.puzzleItems.sort(((t,e)=>+t.innerHTML-+e.innerHTML));let t=this.puzzleItems[0];this.puzzleItems=this.puzzleItems.slice(1),this.puzzleItems.splice(this.puzzleItems.length-1,0,t),this.puzzle.innerHTML="",this.puzzleItems.forEach((t=>this.puzzle.append(t))),this.movesCount++,this.movesCountNode.innerHTML=this.movesCount}saveWinGame(){let t=localStorage.getItem("results")?JSON.parse(localStorage.getItem("results")):{3:[],4:[],5:[],6:[],7:[],8:[]},e={date:Date.now(),help:this.isHelped,moves:this.movesCount,time:this.time};e.help?t[this.level.toString()].push(e):t[this.level.toString()].unshift(e),t[this.level.toString()].sort(((t,e)=>{if(!t.help&&e.help)return-1;if(t.help&&!e.help)return 1;if(t.moves>e.moves)return 1;if(t.moves<e.moves)return-1;{let n=60*t.time.m+t.time.s,i=60*e.time.m+e.time.s;return n>i?1:n<i?-1:e.date-t.date}})),t[this.level.toString()].length>10&&(t[this.level.toString()]=t[this.level.toString()].slice(0,10)),localStorage.setItem("results",JSON.stringify(t))}showWinMessage(){this.puzzle.innerHTML=`\n    <div class="win-modal">\n      <h3>Hooray!</h3>\n      <p>\n          You solved the puzzle in ${this.time.m<10?"0"+this.time.m:this.time.m}:${this.time.s<10?"0"+this.time.s:this.time.s} and ${this.movesCount} moves!</p>\n      <p>${this.isHelped?"Unfortunately, You cheated!!!":""}</p>\n    </div>\n    `}};v.init(),window.onunload=()=>{!v.isWin&&v.movesCount>0&&v.saveGame()}})()})();